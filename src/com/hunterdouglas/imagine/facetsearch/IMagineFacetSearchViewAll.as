package com.hunterdouglas.imagine.facetsearch{	import flash.display.*;	import flash.text.*;	import flash.events.Event;		import com.hunterdouglas.photogallery.*;	import com.hunterdouglas.common.TextUtils;	public class IMagineFacetSearchViewAll extends Sprite	{		private var data:XMLList;		private var scroll:BrowseScroll;		private var background:ViewAll;		private var contentHolder:Sprite;		private var cb:HDComboBox;				public function IMagineFacetSearchViewAll(_data:XMLList):void		{			data	= _data;			background	= new ViewAll();			addChild(background);						contentHolder	= new Sprite();			addChild(contentHolder);						addEventListener(Event.ADDED_TO_STAGE, handlerAddedToStage);			//buildProductList();			//buildProductDropdown(_allProductsArr);					}		private function handlerAddedToStage(e:Event):void		{			initProductList();					}		public function initProductList():void		{			var dp:Array = new Array();						for (var i:int = 0;i<data.length(); i++)			{				//trace(data[i].@id +": "+data[i].ProductTradeName);				var cbItem:HDComboBoxItem = new HDComboBoxItem({id:data[i].@id, text:data[i].ProductTradeName});				dp.push(cbItem);							}						var itemProp:Object	=				{		backgroundWidth:225+50					,	backgroundHeight:19					,	backgroundColor:0xFFFFFF					,	backgroundAlpha:1					, 	border:1					,	borderColor:0x00ff33					,	borderAlpha:0					,	padding:1				};			var titleProp:Object = 				{		backgroundWidth:179					,	backgroundHeight:20					,	backgroundColor:0xFFFFFF					,	backgroundAlpha:0					,	border:1					,	borderColor:0xb8b7af					,	borderAlpha:0					,	text:"Choose a Product"				};			cb = new HDComboBox();			addChild(cb);			cb.x = 13;			cb.y = 31;			cb.name = "viewAll";			cb.addEventListener(HDComboBoxEvent.CHANGE, handlerChangeSelection);			var blockProp:Object = {x:-x-cb.x, y:-y-cb.y};//{y:-y};									cb.init(data,  dp.sortOn("nameForAlphabeticalSort"), 				{		direction:HDComboBox.DROP_UP					,	backgroundWidth:242+50					,	backgroundHeight:300					,	backgroundColor:0xFFFFFF					,	backgroundAlpha:1					,	border:1					,	borderColor:0x878787					,	borderAlpha:0.2					,	itemProp:itemProp					,	titleProp:titleProp					,	blockProp:blockProp				});								}		private function handlerChangeSelection(e:HDComboBoxEvent):void		{			//trace("handlerChangeSelection: "+e.id);			dispatchEvent(new ProductItemEvent(ProductItemEvent.MAKE_SELECTION, true, false, e.id));		}		public function setTitle(_id:int):void		{			cb.setTitle(_id);		}	}}